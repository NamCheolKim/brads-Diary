{% extends "base.html" %} 
{% block content %}
<!-- Page content-->
<div class="container">
  <div>
    <!-- Post content-->
    <div>
      <!-- Title-->
      <h1 class="mt-4">{{ postdiary.title }}</h1>
      <hr />
      <!-- Date and time-->
      <span class="font-weight-bold">{{postdiary.author.first_name}}</span><small>({{postdiary.author}})</small> | 
      {% if postdiary.updated_at %}
      <small>{{ postdiary.updated_at }}에 수정됨</small>
      {% else %}
      <small>{{ postdiary.created_at }}</small>
      {% endif %}
      {% if request.user == postdiary.author %}
      <div class="float-right">
        <a href="{% url 'diarys:modify' postdiary.pk %}" class="btn btn-sm btn-outline-secondary"><i class="fas fa-eraser"></i> 수정</a>
        <a href="{% url 'diarys:delete' postdiary.pk %}" class="delete btn btn-sm btn-outline-danger" onclick="return confirm('게시물을 삭제하시겠습니까?\n삭제한 게시물은 복구할 수 없습니다.')"><i class="fas fa-trash-alt"></i> 삭제</a>
      </div>
      {% endif %}  
      <hr />
      <!-- Preview image-->
      {% if postdiary.head_photo %}
        <img class="img-fluid rounded" src="{{ postdiary.head_photo }}" width="400" height="400" alt="" />
      {% endif %}
      <hr />
      <!-- Post content-->
      <p class="lead">{{ postdiary.content | safe }}</p>
      <hr />
      <!-- Comments form-->
      <div class="card my-4">
        <h5 class="card-header">Leave a Comment:</h5>
        <div class="card-body">
          <form>
            <div class="form-group">
              <textarea class="form-control" rows="3"></textarea>
            </div>
            <button class="btn btn-primary" type="submit">Submit</button>
          </form>
        </div>
      </div>
      <!-- Single comment-->
      {% for comment in postdiary.comments.all %}
      <div class="media mb-4">
        <img class="d-flex mr-3 rounded-circle" src="https://via.placeholder.com/50x50" alt="..." />
        <div class="media-body">
          <span class="mt-0">{{ comment.user }}
            <small class="text-muted"> | </small>
          {% if comment.updated_at %}
            <small class="text-muted">{{comment.updated_at}} 수정됨</small>
          {% else %}
            <small class="text-muted">{{comment.created_at}}</small>
          {% endif %}
          </span><br />
          {{ comment.comment }}
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
